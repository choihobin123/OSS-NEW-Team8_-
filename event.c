#define _CRT_SECURE_NO_WARNINGS
#include "gamefunc.h"
#include <stdio.h>
#include <stdlib.h>
#include <windows.h>
#include <conio.h>   // í‚¤ ì…ë ¥ ê°ì§€(_kbhit, _getch)ìš©
#define KEY_UP 72
#define KEY_DOWN 80
#define KEY_ENTER 13

void typingPrint(const char* text) {
    int i = 0;
    int skip = 0; // ìŠ¤í‚µ ëª¨ë“œ í”Œë˜ê·¸ (0: ì •ìƒ ì†ë„, 1: ì¦‰ì‹œ ì¶œë ¥)

    while (_kbhit()) _getch();

    while (text[i] != '\0') {
        if (!skip && _kbhit()) {
            char ch = _getch();
            if (ch == '\r') { // ì—”í„°('\r')ë©´ ìŠ¤í‚µ
                skip = 1;
            }
        }

        int charLen = 1;
        unsigned char c = (unsigned char)text[i];

        // UTF-8 ë°”ì´íŠ¸ ê¸¸ì´ ê³„ì‚°
        if ((c & 0xF0) == 0xF0) charLen = 4;
        else if ((c & 0xE0) == 0xE0) charLen = 3; // í•œê¸€
        else if ((c & 0xC0) == 0xC0) charLen = 2;
        else charLen = 1;

        // ê¸€ì ì¶œë ¥
        for (int j = 0; j < charLen; j++) {
            printf("%c", text[i + j]);
        }
        i += charLen;

        if (!skip) {
            Sleep(45);      // ì¶œë ¥ ì†ë„
            fflush(stdout); 
        }
        else {
            Sleep(0);       // ìŠ¤í‚µ ì‹œ ë”œë ˆì´ 0 (ì¦‰ì‹œ ì¶œë ¥)
        }
    }
    
    fflush(stdout);
}

// [ë³´ì¡° í•¨ìˆ˜] ì—”í„° ëŒ€ê¸°
void waitEnter() {
    printf("\n(Enterë¥¼ ëˆ„ë¥´ë©´ ë„˜ì–´ê°‘ë‹ˆë‹¤)");
    int c;
    while ((c = getchar()) != '\n' && c != EOF); 
}

// [ë³´ì¡° í•¨ìˆ˜] ë²„í¼ ë¹„ìš°ê¸°
void clearBuffer() {
    int c;
    while ((c = getchar()) != '\n' && c != EOF);
}

void printStatus(State* st) {
	if (st->stress < 0) st->stress = 0;
    if (st->skill < 0) st->skill = 0;
    printf("\n[í˜„ì¬ ìƒíƒœ]\n");
    printf("ìŠ¤íŠ¸ë ˆìŠ¤ : %d\n", st->stress);
    printf("ì‹¤ë ¥     : %d\n", st->skill);
    printf("ì—¬ì¹œ     : %s\n\n", st->gf ? "ìˆìŒ" : "ì—†ìŒ");
}

void setColor(int color) { // [ë³´ì¡° í•¨ìˆ˜] í…ìŠ¤íŠ¸ ìƒ‰ìƒ ë³€ê²½
// color: 7=í°ìƒ‰, 10=ì—°ë‘ìƒ‰, 11=í•˜ëŠ˜ìƒ‰, 12=ë¹¨ê°„ìƒ‰, 14=ë…¸ë€ìƒ‰, 8=íšŒìƒ‰
    SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), color);
}

void delay(int milliseconds) {
    long pause;
    // ëŒ€ëµì ì¸ ë£¨í”„ íšŸìˆ˜ ì¡°ì • (ì»´í“¨í„° ì„±ëŠ¥ì— ë”°ë¼ ë‹¤ë¦„)
    pause = (long)milliseconds * 100000;
    while (pause--);
}

void showLoadingBar(const char* taskName) {
    setColor(10); // ì—°ë‘ìƒ‰ (ì‹œìŠ¤í…œ ëŠë‚Œ)
    printf("\n [SYSTEM] %s...\n", taskName);

    printf(" 0%% [");
    for (int i = 0; i < 30; i++) printf(" ");
    printf("]");

    for (int i = 0; i <= 30; i++) {
        // ì»¤ì„œë¥¼ ì¤„ ë§¨ ì•ìœ¼ë¡œ ì´ë™ (\r)
        printf("\r");

        // í¼ì„¼íŠ¸ ì¶œë ¥
        int percent = (i * 100) / 30;
        setColor(11); // í•˜ëŠ˜ìƒ‰
        printf(" %3d%% [", percent);

        // ê²Œì´ì§€ ì±„ìš°ê¸°
        setColor(10); // ì—°ë‘ìƒ‰
        for (int j = 0; j < i; j++) printf("=");
        for (int j = i; j < 30; j++) printf(" ");

        setColor(11); // í•˜ëŠ˜ìƒ‰
        printf("]");

        // ëœë¤ ë”œë ˆì´ë¡œ ë¦¬ì–¼í•¨ ì¶”ê°€
        Sleep(rand() % 50 + 20);
    }
    printf("\n");
    Sleep(300);
    setColor(7); // ë‹¤ì‹œ í°ìƒ‰ ë³µêµ¬
}

void loadingBar() { // ì±•í„° ë„˜ì–´ê°ˆ ë•Œ ë¡œë”©ë°”
    printf("\n    Loading: [");
    for (int i = 0; i < 20; i++) {
        printf("â– ");
        Sleep(30); // 0.03ì´ˆ ë”œë ˆì´ (ì¢Œë¥´ë¥µ ì°¨ì˜¤ë¥´ëŠ” íš¨ê³¼)
    }
    printf("] COMPLETE!\n");
    Sleep(500); // ì ì‹œ ëŒ€ê¸°
}

void Opening() {
    char buf[128];
    system("cls"); // í™”ë©´ ì´ˆê¸°í™”

    // 1. ì‹œìŠ¤í…œ ë¶€íŒ… ì‹œí€€ìŠ¤ (ë§¤íŠ¸ë¦­ìŠ¤ ëŠë‚Œ)
    setColor(10); // ì—°ë‘ìƒ‰
    printf("\n Initializing Boot Sequence...\n");
    Sleep(500);
    printf(" Checking Memory... OK\n");
    Sleep(200);
    printf(" Loading User Data... OK\n");
    Sleep(200);

    showLoadingBar("Decrypting Memories");
    showLoadingBar("Syncing Timeline");

    Sleep(1000);
    system("cls");

    // 2. íƒ€ì´í‹€ ë¡œê³  (ASCII ART)
    // í°íŠ¸ê°€ ê¹¨ì§€ì§€ ì•Šê²Œ ìƒ‰ìƒ ê°•ì¡°
    setColor(11); // í•˜ëŠ˜ìƒ‰ (ì œëª©)
    printf("\n\n");
    printf("   â–ˆâ–ˆâ•—     â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—\n");
    printf("   â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•   â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•\n");
    printf("   â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ•‘  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  \n");
    printf("   â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•”â•â•â•     â–ˆâ–ˆâ•”â•â•â•â• â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•  \n");
    printf("   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—\n");
    printf("   â•šâ•â•â•â•â•â•â•â•šâ•â•â•šâ•â•     â•šâ•â•â•â•â•â•â•   â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â•\n");
    printf("\n");

    setColor(14); // ë…¸ë€ìƒ‰ (ë¶€ì œ)
    printf("            [ ì¸ìƒ.exe : ìˆ˜ëŠ¥ ê·¸ ì´í›„ ]\n");
    printf("            - ê³µëŒ€ìƒ ëŒ€í•™ ìƒí™œ ì‹œë®¬ë ˆì´ì…˜ -\n");
    printf("\n\n");

    setColor(8); // íšŒìƒ‰ (ì•ˆë‚´ë¬¸êµ¬)
    printf("  System Ready. Press [Enter] to Access Diary module...\n");

    // ì—”í„° ëŒ€ê¸°
    fflush(stdin);
    while (getchar() != '\n');

    // 3. ì¼ê¸°ì¥ ê°ì„± ì§„ì… (í™”ë©´ ì „í™˜)
    system("cls");
    Sleep(1000);

    setColor(7); // í°ìƒ‰ (ê¸°ë³¸)
    printf("\n\n");

    // ëŠë¦¬ê²Œ íƒ€ì´í•‘ í•´ì£¼ëŠ” í•¨ìˆ˜
    typingPrint(" ...ì‹œìŠ¤í…œì´ ì¢…ë£Œë˜ê³ , ë‚¡ì€ ì¼ê¸°ì¥ì´ í™”ë©´ì— ë‚˜íƒ€ë‚©ë‹ˆë‹¤.\n\n");
    Sleep(700);

    typingPrint(" [ 202Xë…„ 3ì›” 2ì¼ ]\n");
    typingPrint(" ì°¨ê°€ìš´ ìƒˆë²½ ê³µê¸°. ë‹³ì•„ë²„ë¦° íœì„ ë“­ë‹ˆë‹¤.\n");
    typingPrint(" ì¹˜ì—´í–ˆë˜ ìˆ˜ëŠ¥ì´ ëë‚˜ê³ , í•©ê²© í†µì§€ì„œë¥¼ ë°›ì•˜ë˜ ê·¸ë‚ ì˜ ê¸°ì–µ...\n\n");
    Sleep(500);

    typingPrint(" ì´ì œ ë‹¹ì‹ ì˜ 4ë…„ì´ ê¸°ë¡ë©ë‹ˆë‹¤.\n");
    typingPrint(" í•™ì , ì¸ê°„ê´€ê³„, ì‚¬ë‘, ê·¸ë¦¬ê³  ë¯¸ë˜.\n");
    typingPrint(" ì´ ì¼ê¸°ì¥ì˜ ëì— ë¬´ì—‡ì´ ì í˜€ìˆì„ì§€ëŠ”...\n\n");
    Sleep(300);

    setColor(12); // ë¹¨ê°„ìƒ‰ (ê°•ì¡°)
    typingPrint(" ì˜¤ì§ ë‹¹ì‹ ì˜ ì„ íƒì— ë‹¬ë ¤ìˆìŠµë‹ˆë‹¤.\n\n");

    setColor(7); // í°ìƒ‰ ë³µêµ¬
    Sleep(500);

    printf("==================================================\n");
    printf("      ì²« í˜ì´ì§€ë¥¼ ë„˜ê¸°ì‹œë ¤ë©´ [Enter]ë¥¼ ëˆ„ë¥´ì„¸ìš”\n");
    printf("==================================================\n");

    fflush(stdin);
    // ë²„í¼ ë¹„ìš°ê³  ì…ë ¥ ëŒ€ê¸°
    fgets(buf, sizeof(buf), stdin);
    system("cls");
}

// ì˜¤í”„ë‹ ë©”ë‰´
int printOpeningMenu() {
    int cursor = 0; // í˜„ì¬ ì„ íƒëœ ë©”ë‰´ ìœ„ì¹˜ (0: ìƒˆê²Œì„, 1: ì„¤ëª…, 2: ì¢…ë£Œ)
    int key;

    while (1) {
        system("cls"); // í™”ë©´ ì§€ìš°ê¸°

        // 1. ë©”ì¸ íƒ€ì´í‹€ ë°•ìŠ¤ ì¶œë ¥
        setColor(11); // í•˜ëŠ˜ìƒ‰
        printf("\n");
        printf("  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\n");
        printf("  â•‘                                                  â•‘\n");
        printf("  â•‘            L I F E . E X E   SYSTEM              â•‘\n");
        printf("  â•‘                                                  â•‘\n");
        printf("  â•‘        [ v1.0 / User: Engineering_Student ]      â•‘\n");
        printf("  â•‘                                                  â•‘\n");
        printf("  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n");

        // 2. ë©”ë‰´ ëª©ë¡ ì¶œë ¥
        const char* menuItems[] = {
            " ìƒˆ ê²Œì„ ì‹œì‘ ",
            " ì‹œìŠ¤í…œ ì„¤ëª…ì„œ ",
            " ì‹œìŠ¤í…œ ì¢…ë£Œ "
        };

        for (int i = 0; i < 3; i++) {
            if (i == cursor) {
                // ì„ íƒëœ í•­ëª©: ë…¸ë€ìƒ‰ + í™”ì‚´í‘œ
                setColor(14);
                printf("      â–¶  [ %s ]\n\n", menuItems[i]);
            }
            else {
                // ì„ íƒ ì•ˆ ëœ í•­ëª©: íšŒìƒ‰
                setColor(8);
                printf("         %s \n\n", menuItems[i]);
            }
        }

        // 3. í•˜ë‹¨ ì•ˆë‚´ ë¬¸êµ¬
        setColor(7); // í°ìƒ‰
        printf("\n  ----------------------------------------------------\n");
        printf("   [â†‘/â†“]: ì´ë™   [Enter]: ì„ íƒ \n");

        // 4. í‚¤ ì…ë ¥ ì²˜ë¦¬
        key = _getch(); // í‚¤ í•˜ë‚˜ ì…ë ¥ë°›ìŒ

        if (key == 224) { // íŠ¹ìˆ˜í‚¤(í™”ì‚´í‘œ)ì¸ ê²½ìš°
            key = _getch(); // ì‹¤ì œ í‚¤ ì½”ë“œ ì½ê¸°
            if (key == KEY_UP) {
                cursor--;
                if (cursor < 0) cursor = 2; // ë§¨ ìœ„ì—ì„œ ìœ„ë¡œ ê°€ë©´ ë§¨ ì•„ë˜ë¡œ
            }
            else if (key == KEY_DOWN) {
                cursor++;
                if (cursor > 2) cursor = 0; // ë§¨ ì•„ë˜ì—ì„œ ì•„ë˜ë¡œ ê°€ë©´ ë§¨ ìœ„ë¡œ
            }
        }
        else if (key == KEY_ENTER) { // ì—”í„°í‚¤ ëˆ„ë¦„
            // ì„ íƒëœ ì»¤ì„œì— ë”°ë¼ ë™ì‘ ê²°ì •
            if (cursor == 0) {
                return 1; // ìƒˆ ê²Œì„
            }
            else if (cursor == 1) {
                // ê²Œì„ ì„¤ëª… í™”ë©´
                system("cls");
                setColor(10); // ì—°ë‘ìƒ‰
                printf("\n\n [ ì‹œìŠ¤í…œ ì„¤ëª…ì„œ ]\n\n");

                setColor(7);
                typingPrint(" > ë³¸ ì‹œë®¬ë ˆì´ì…˜ì€ 'ê³µëŒ€ìƒ'ì˜ ëŒ€í•™ ìƒí™œì„ ë‹¤ë£¹ë‹ˆë‹¤.\n\n");
                typingPrint(" > ë§¤ ìˆœê°„ì˜ ì„ íƒì´ ë‹¹ì‹ ì˜ [ìŠ¤íŠ¸ë ˆìŠ¤], [í•™ì ], [ì—°ì• ]ë¥¼ ê²°ì •í•©ë‹ˆë‹¤.\n");
                typingPrint(" > í˜„ëª…í•œ ì„ íƒìœ¼ë¡œ ìµœê³ ì˜ ì—”ë”©ì„ ìˆ˜ì§‘í•˜ì‹­ì‹œì˜¤.\n\n");

                setColor(8);
                printf(" ----------------------------------------\n");
                printf("  [Enter] í‚¤ë¥¼ ëˆ„ë¥´ë©´ ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°‘ë‹ˆë‹¤.\n");

                while (_getch() != 13); // ì—”í„° ì¹  ë•Œê¹Œì§€ ëŒ€ê¸°
            }
            else if (cursor == 2) {
                return 3; // ì¢…ë£Œ
            }
        }
    }
}


// ê²Œì„ì„ ì¦‰ì‹œ ì¢…ë£Œí•´ì•¼ í•˜ëŠ” ìƒíƒœì¸ì§€ ê²€ì‚¬í•˜ëŠ” í•¨ìˆ˜
int isGameEnd(const State* st) {
    if (st->stress >= 200) return 1;        // ê³¼ë¡œì‚¬
    if (st->badFlag >= 3) return 1;         // êµ°ëŒ€ íê¸‰ (ì˜ì°½)
    if (st->proFlag >= 1) return 1;         // ì „ë¬¸í•˜ì‚¬
    if (st->nojobFlag >= 1) return 1;       // ìí‡´
    if (st->blackmoneyFlag >= 1) return 1;  // íš¡ë ¹
    if (st->gametrollFlag >= 1) return 1;   // íŠ¸ë¡¤
    if (st->blameFlag >= 1) return 1;       // ì†ì ˆ
    if (st->blame2Flag >= 1) return 1;      // ì†ì ˆ
    if (st->badgamerFlag >= 1) return 1;    // ê²Œì„ì¤‘ë…

	if (st->addictionFlag >= 1) return 1;   // ì½”ì¸ì¤‘ë…
	if (st->healthFlag >= 1) return 1;     // ê±´ê°•ì•…í™”
	if (st->quitFlag >= 1)return 1;         // ì¤‘ë„í¬ê¸°
	if (st->graduateFlag >= 1) return 1;        // ëŒ€í•™ì› ì§„í•™   

    if (st->byegirlfriendFlag >= 1) return 1; // ì´ë³„
    if (st->overworkFlag >= 1) return 1; // ê³¼ë¡œ
    if (st->noPortfolioFlag >= 1) return 1; // ë¹ˆ í´ë”
    if (st->slaveFlag >= 1) return 1; // ëŒ€í•™ì›

    return 0; // ê²Œì„ ê³„ì† ì§„í–‰ ê°€ëŠ¥
}

// í•µì‹¬ ì§ˆë¬¸ í•¨ìˆ˜ (ê¸°ì¡´ runEventì˜ ì´ë¦„ ë³€ê²½ + ë¡œì§ ìœ ì§€)
int ask_fixed_question(int idx, State* st, const Event* event) {
    const Event* ev = &event[idx];
    int choice;

    system("cls");

    // [ê¸°ì¡´ í…ìŠ¤íŠ¸ í˜•ì‹ ì ˆëŒ€ ìœ ì§€]
    printf("\n====================================\n\n");
    printf("%s\n\n", ev->question); 
    printf("1) %s\n", ev->choice1);
    printf("2) %s\n", ev->choice2);
    if (ev->choice3 != NULL) printf("3) %s\n", ev->choice3);
    printf("\n====================================\n");

    printStatus(st);

    // scanf ì…ë ¥ (ì•ˆì „ ì²˜ë¦¬)
    while (1) {
        printf("ì„ íƒ>> ");
        if (scanf("%d", &choice) == 1) {
            clearBuffer(); // ì—”í„° ì œê±°
            
            int max_c = (ev->choice3 != NULL) ? 3 : 2;
            if (choice >= 1 && choice <= max_c) break;
        } else {
            clearBuffer(); // ë¬¸ì ì…ë ¥ ì‹œ ì œê±°
        }
        printf("ì˜ëª»ëœ ì…ë ¥ì…ë‹ˆë‹¤.\n");
    }

    const int* chg = NULL;
    const char* resultText = NULL;
    int next_idx = -1;

    // ë¡œì§ ì²˜ë¦¬
    if (choice == 1) {
        chg = ev->stateChange1;
        resultText = ev->result1;
        next_idx = ev->next1;
    }
    else if (choice == 2) {
        chg = ev->stateChange2;
        resultText = ev->result2;
        next_idx = ev->next2;
    }
    else if (choice == 3) {
        chg = ev->stateChange3;
        resultText = ev->result3;
        next_idx = ev->next3;
    }

    // ==========================================================
    // í—¤ë” íŒŒì¼ì˜ ì„¤ì •ê°’(Trigger)ìœ¼ë¡œ í”Œë˜ê·¸ ì¦ê°€
    // ==========================================================
    
    if (ev->badFlagTrigger == choice) st->badFlag++;

    if (ev->proFlagTrigger == choice) st->proFlag++;

    if (ev->blackmoneyFlagTrigger == choice) st->blackmoneyFlag++;

    if (ev->gametrollFlagTrigger == choice) st->gametrollFlag++;

    if (ev->nojobFlagTrigger == choice) st->nojobFlag++;

    if (ev->badgamerFlagTrigger == choice) st->badgamerFlag++;

    if (ev->blameFlagTrigger == choice) st->blameFlag++;

    if (ev->blame2FlagTrigger == choice) st->blame2Flag++;


	if (ev->addictionFlagTrigger == choice) st->addictionFlag++;

	if (ev->healthFlagTrigger == choice) st->healthFlag++;

	if (ev->quitFlagTrigger == choice) st->quitFlag++;

	if (ev->graduateFlagTrigger == choice) st->graduateFlag++;

    if (ev->byegirlfriendFlagTrigger == choice) st->byegirlfriendFlag++;

    if (ev->overworkFlagTrigger == choice) st->overworkFlag++;

    if (ev->noPortfolioFlagTrigger == choice) st->noPortfolioFlag++;

    if (ev->slaveFlagTrigger == choice) st->slaveFlag++;


    // ==========================================================

    st->stress += chg[0];
    st->skill += chg[1];
    if (chg[2] == 1) st->gf = 1;

    printf("\n------------------------------------\n\n");
    if (resultText != NULL) {
        typingPrint(resultText); // ê²°ê³¼ ë©˜íŠ¸ ì¶œë ¥
    }
    printf("\n\n>> (ìƒíƒœ ë³€í™”) ìŠ¤íŠ¸ë ˆìŠ¤ %+d, ì‹¤ë ¥ %+d\n", chg[0], chg[1]);
    printf("\n------------------------------------\n");
    
    // ê²°ê³¼ í™•ì¸ ëŒ€ê¸°
    waitEnter(); 

    return next_idx;
}

// ëœë¤ ì§ˆë¬¸ ì²˜ë¦¬
void ask_random_question(int pool_size, State* st, const Event* event) {
    int r = rand() % pool_size;
    // ëœë¤í•œ ë²ˆí˜¸ë¡œ ê³ ì • ì§ˆë¬¸ í•¨ìˆ˜ë¥¼ í˜¸ì¶œ
    ask_fixed_question(r, st, event);
}

// í•™ë…„ ë£¨í”„ (1~4í•™ë…„ íë¦„ìš©)
void runGradeLoop(const char* title, State* st, const Event* fixedEvents, const Event* randomEvents, int poolSize) {
    
    int visited[20] = { 0 }; 
    int usedCount = 0; 

    int current = 0;
    
    system("cls");
    showChapterTransition(title); // ì±•í„° ë„˜ì–´ê°ˆ ë•Œ UI 

    // ë©”ì¸ ìŠ¤í† ë¦¬ ë£¨í”„
    while (current != -1) {
        
        // ê³ ì • ìŠ¤í† ë¦¬ ì§„í–‰
        current = ask_fixed_question(current, st, fixedEvents);
        
        // ì—”ë”©/ê²Œì„ì˜¤ë²„ ì²´í¬
        if (st->stress >= 200) return;
        if (isGameEnd(st)) return; 


        // ëœë¤ ìŠ¤í† ë¦¬ (ê³ ì • ìŠ¤í† ë¦¬ ì‚¬ì´ì‚¬ì´ì— ë¼ì–´ë“¤ê¸°)
        // í™•ë¥ : 30%
        if (current != -1 && randomEvents != NULL && poolSize > 0 && (rand() % 10 < 3)) {
            
            // ì•„ì§ ì•ˆ ì“´ ëœë¤ ì§ˆë¬¸ì´ ë‚¨ì•„ìˆëŠ” ê²½ìš°ì—ë§Œ ì‹¤í–‰
            if (usedCount < poolSize) {
                int r_idx;
                
                // ì•ˆ ì“´ ë²ˆí˜¸ ë½‘ì„ ë•Œê¹Œì§€ ëº‘ëº‘ì´ (ì¤‘ë³µ ë°©ì§€)
                do {
                    r_idx = rand() % poolSize;
                } while (visited[r_idx] == 1);

                visited[r_idx] = 1; 
                usedCount++;
                
                ask_fixed_question(r_idx, st, randomEvents);
                
                if (isGameEnd(st)) return;
            }
        }
    }
}

// ì—”ë”© ì¶œë ¥ (ê¸°ì¡´ í…ìŠ¤íŠ¸ ìœ ì§€)
void printSpecialEnding(const State* st) {
    system("cls");
    printf("\n====================================\n");
    printf("        [ G A M E   O V E R ]\n");
    printf("====================================\n\n");

    //ìƒíƒœë³€ìˆ˜ ì—”ë”©
    if (st->stress >= 200) {
        typingPrint("[ê³¼ë¡œì‚¬ ì—”ë”©] \n\n\"ì–´..? ì™œ ê°‘ìê¸° ì•ì´ íë¦¿í•´ë³´ì´ì§€..?\" \nê·¸ ë’¤ë¡œ í¬ë¯¸í•˜ê²Œ ê¸°ì–µë‚˜ëŠ” ê²ƒì€..\n\në‹¤ê¸‰í•œ ì¹œêµ¬ì˜ ëª©ì†Œë¦¬ì™€ ì‚¬ì´ë Œ ì†Œë¦¬ë¿ì´ì˜€ë‹¤.");
    }
    //êµ°ëŒ€
    else if (st->proFlag >= 1) {
        typingPrint("[ì „ë¬¸í•˜ì‚¬ ì—”ë”©] \n\n\"ìë„¤, ì¼ ë¨¸ë¦¬ê°€ ì•„ì£¼ ì¢‹ì•„. ë‚˜ë‘ 6ê°œì›”ë§Œ ë” í•˜ì§€? \n\n\"í–‰ë³´ê´€ë‹˜ì˜ ë‹¬ì½¤í•œ ì œì•ˆ, ê·¸ë¦¬ê³  ë‚´ ì†ì— ë“¤ë¦° ì„ê´€ ì§€ì›ì„œ. \nì •ì‹ ì„ ì°¨ë ¸ì„ ë• ì´ë¯¸ ë„ì¥ì€ ì°í˜€ ìˆì—ˆë‹¤.");
    }
    else if (st->badFlag >= 3) {
        typingPrint("[ë§ˆìŒì˜ í¸ì§€ ì—”ë”©] \n\nì¤‘ëŒ€ì¥ë‹˜ ì±…ìƒ ìœ„ì— ìˆ˜ë¶ì´ ìŒ“ì¸ í° ë´‰íˆ¬ë“¤. \n\n\"ë” ì´ìƒì€ ëª» ì°¸ê² ìŠµë‹ˆë‹¤...\" \"ì•…ë§ˆë¥¼ ë³´ì•˜ìŠµë‹ˆë‹¤...\" \n\nìµìˆ™í•œ ë‚´ ì´ë¦„ì´ ë³´ì¸ë‹¤. í—Œë³‘ëŒ€ ì°¨ê°€ ìœ„ë³‘ì†Œë¥¼ í†µê³¼í–ˆë‹¤.");
    }
    //1í•™ë…„
    else if (st->addictionFlag >= 1) {
		typingPrint("[ì½”ì¸ì¤‘ë… ì—”ë”©] \n\n\"ì´ë²ˆì— ëŒ€ë°• ë‚  ê±°ì•¼. ì´ë²ˆì—” ì§„ì§œì•¼.\" \n\ní™”ë©´ ì† ìˆ«ìê°€ ì¶¤ì¶˜ë‹¤. \në‚´ í†µì¥ì€ ë°”ë‹¥ë‚¬ê³ , ë¹šì€ ëˆˆë©ì´ì²˜ëŸ¼ ë¶ˆì–´ë‚¬ë‹¤. \ní˜„ì‹¤ ë„í”¼ì²˜ë¡œ ì‚¼ì€ ê°€ìƒí™”íëŠ” ë‚˜ë¥¼ ë” ê¹Šì€ ë‚˜ë½ìœ¼ë¡œ ë°€ì–´ë„£ì—ˆë‹¤.");
    }
    else if (st->healthFlag >= 1) {
		typingPrint("[ê±´ê°•ì•…í™” ì—”ë”©] \n\n\"ì˜ì‚¬ ì„ ìƒë‹˜, ì œê°€ ì™œ ì´ë ‡ê²Œ ì•„í”ˆ ê±°ì£ ?\" \n\nì˜ì‚¬ëŠ” ì¡°ìš©íˆ ë‚´ ì§„ë‹¨ì„œë¥¼ ê±´ë„¸ë‹¤. \n'ë§Œì„± í”¼ë¡œ ì¦í›„êµ°'. \në‚˜ëŠ” ê·¸ì œì„œì•¼ ê¹¨ë‹¬ì•˜ë‹¤. \në‚´ ëª¸ì€ ì´ë¯¸ í•œê³„ì— ë‹¤ë‹¤ëë‹¤ëŠ” ê²ƒì„.");
    }
    //2í•™ë…„
    else if (st->nojobFlag >= 1) {
        typingPrint("[ë°±ìˆ˜ ì—”ë”©] \n\n\"í•™êµ ê³µë¶€ëŠ” ë‚˜ë‘ ì•ˆ ë§ì•„.\" \n\níŒ¨ê¸°ë¡­ê²Œ ìì²´ íœ´ê°•ì„ ë•Œë ¸ë‹¤. \në„ì„œê´€ì— ê°„ë‹¤ëŠ” í•‘ê³„ë¡œ PCë°©ì„ ê°”ê³ , ì½”ë”© ê³µë¶€ ëŒ€ì‹  ë„·í”Œë¦­ìŠ¤ë¥¼ ì •ì£¼í–‰í–ˆë‹¤. \në™ê¸°ë“¤ì´ ì¡¸ì—… ê°€ìš´ì„ ì…ì„ ë•Œ, ë‚˜ëŠ” ì¬ìˆ˜ê°• ì‹ ì²­ ë²„íŠ¼ì„ ëˆ„ë¥´ê³  ìˆë‹¤.");
    }
    else if (st->blackmoneyFlag >= 1) {
        typingPrint("[íš¡ë ¹ ì—”ë”©] \n\n\"ì, ì´ê±° ë¹„ë°€ì´ë‹¤? ë§›ìˆëŠ” ê±°ë‚˜ ì‚¬ ë¨¹ì–´.\" \n\nì„ ë°°ê°€ ê±´ë„¨ ë‘íˆ¼í•œ ë´‰íˆ¬. \në‚˜ëŠ” ê·¸ë‚  ì¥ë¶€ë¥¼ ë®ì—ˆê³  ì–‘ì‹¬ë„ í•¨ê»˜ íŒ”ì•˜ë‹¤. \nì–¼ë§ˆ í›„ í•™êµì— ê²½ì°°ì°¨ê°€ ë“¤ì´ë‹¥ì³¤ë‹¤. \nì°¸ê³ ì¸ ì¡°ì‚¬? \nì•„ë‹ˆ. \në‚˜ë„ ê³µë²”ì´ì—ˆë‹¤.");
    }
    else if (st->gametrollFlag >= 1) {
        typingPrint("[íŠ¸ë¡¤ ì—”ë”©] \n\n\"ì•„ë‹ˆ ê²Œì„ì¸ë° ì™œ ì´ë ‡ê²Œ ì§„ì§€í•¨? ã…‹ã…‹\" \n\në‚˜ëŠ” ê°•ì² ì‹¬ì¥ ìœ ë¯¸ë¡œ í˜‘ê³¡ì„ ëˆ„ë³ë‹¤. \në‚˜ë§Œ ì¬ë°Œì—ˆë‹¤. \nê²Œì„ì´ ëë‚˜ìë§ˆì ì¹œêµ¬ë“¤ì€ ì¡°ìš©íˆ ì§ì„ ì‹¸ì„œ ë‚˜ê°”ë‹¤.");
    }
    else if (st->blameFlag >= 1 || st->blame2Flag >= 1) {
        typingPrint("[ì†ì ˆ ì—”ë”©] \n\n\"ì•¼! ì´ê±¸ ëª»í•˜ëƒ? ë„¤ê°€ ì‚¬ëŒì´ëƒ?\" \n\në‚´ ê³ í•¨ì†Œë¦¬ì— PCë°©ì´ ì¡°ìš©í•´ì¡Œë‹¤. \nì¹œêµ¬ì˜ ëˆˆë¹›ì´ ì°¨ê°‘ê²Œ ì‹ì—ˆë‹¤. \n\"ê·¸ë˜... ë„ˆ ì˜ë‚¬ë‹¤. ë„ˆ í˜¼ì í•´ë¼.\" \në‹¨í†¡ë°©ì˜ ìˆ«ìê°€ í•˜ë‚˜ì”© ì¤„ì–´ë“ ë‹¤. ì´ì œ ì•„ë¬´ë„ ë‚˜ë¥¼ ë¶€ë¥´ì§€ ì•ŠëŠ”ë‹¤.");
    }
    else if (st->badgamerFlag >= 1) {
        typingPrint("[ê²Œì„ì¤‘ë… ì—”ë”©] \n\n\"ë‚´ í”¼ì§€ì»¬ ë´¤ëƒ? ì´ê±´ í”„ë¡œ ê°ì´ë‹¤.\" \n\nì°©ê°ì´ì—ˆë‹¤. \në‚´ê°€ ìˆëŠ” ê³³ì€ ë¡¤ë“œì»µ ê²°ìŠ¹ ë¬´ëŒ€ê°€ ì•„ë‹ˆë¼ ì»´ì»´í•œ PCë°© êµ¬ì„ì´ì—ˆë‹¤. \nìŒ“ì—¬ê°€ëŠ” ì»µë¼ë©´ ìš©ê¸°ì™€ ë©ˆì¶°ë²„ë¦° í‹°ì–´. \ní˜„ì‹¤ ë¡œê·¸ì•„ì›ƒì€ ë¶ˆê°€ëŠ¥í–ˆë‹¤.");
    }
    //3í•™ë…„
    else if(st->byegirlfriendFlag >= 1){
        typingPrint("[ì´ë³„ ì—”ë”©] \n\n\"ìš°ë¦¬... ê·¸ë§Œí•˜ì.\" \n\nê·¸ í•œë§ˆë””ê°€ ë‚´ ì„¸ìƒì˜ ì „ì›ì„ êº¼ë²„ë ¸ë‹¤. \nì•„ë¬´ê²ƒë„ ì†ì— ì¡íˆì§€ ì•ŠëŠ”ë‹¤. ì „ê³µì±…ë„, ê²Œì„ë„, ë°¥ ë¨¹ëŠ” ê²ƒì¡°ì°¨ ê·€ì°®ë‹¤. \në°© êµ¬ì„ì— ìŒ“ì—¬ê°€ëŠ” ìˆ ë³‘ë§Œí¼ ë‚´ í•™ì ë„, ë‚´ ì¸ìƒë„ ë¬´ë„ˆì ¸ ë‚´ë ¸ë‹¤. ë‚˜ëŠ” ë°© ë°–ìœ¼ë¡œ ë‚˜ê°€ëŠ” ë¬¸ì„ ì ê°€ë²„ë ¸ë‹¤.");
    }
    else if(st->overworkFlag >= 1){
        typingPrint("[ê³¼ë¡œ ì—”ë”©] \n\n\"ì–´ì„œì˜¤ì„¸...ìš”...\" \n\ní¸ì˜ì  ê³„ì‚°ëŒ€ì˜ ë°”ì½”ë“œê°€ 2ê°œë¡œ ê²¹ì³ ë³´ì´ê¸° ì‹œì‘í–ˆë‹¤.\nìƒˆë²½ ì•Œë°”ê°€ ëë‚˜ë©´ ì‰´ í‹ˆ ì—†ì´ 1êµì‹œ ìˆ˜ì—…ìœ¼ë¡œ, ê·¸ë¦¬ê³  ë‹¤ì‹œ ê³¼ì œë¡œ... ì¹´í˜ì¸ìœ¼ë¡œ ì–µì§€ë¡œ ë¶™ì¡ê³  ìˆë˜ ì •ì‹ ì¤„ì´ íˆ­ í•˜ê³  ëŠì–´ì¡Œë‹¤.\n\n\"í•™ìƒ! í•™ìƒ!! ì •ì‹  ì°¨ë ¤!!\"\n\nëˆˆì„ ë–´ì„ ë•Œ ë³´ì¸ ê±´ í•˜ì–€ ë³‘ì› ì²œì¥ë¿ì´ì—ˆë‹¤. ì˜ì‚¬ ì„ ìƒë‹˜ì€ ë‹¨í˜¸í•œ í‘œì •ìœ¼ë¡œ íœ´í•™ ì§„ë‹¨ì„œë¥¼ ë‚´ë°€ì—ˆë‹¤. í†µì¥ ì”ê³ ëŠ” ì¡°ê¸ˆ ì°¼ì„ì§€ ëª°ë¼ë„, ë‚´ ëª¸ì€ ì™„ì „íˆ ë°©ì „ë˜ì–´ ë²„ë ¸ë‹¤.");
    }
    else if(st->noPortfolioFlag >= 1){
        typingPrint("[ë¹ˆ í´ë” ì—”ë”©] \n\n\"ì§€ì› ë§ˆê° 10ë¶„ ì „.\"\në°”íƒ•í™”ë©´ì€ 'ìƒˆ í´ë”', 'ìµœì¢…', 'ì§„ì§œ_ìµœì¢…', 'ì§„ì§œ_ì§„ì§œ_ìµœì¢…'ìœ¼ë¡œ ê°€ë“ ì°¨ ìˆë‹¤.\ní•˜ì§€ë§Œ ì •ì‘ í´ë¦­í•´ ë³´ë©´ ì •ë¦¬ë˜ì§€ ì•Šì€ ìŠ¤í¬ë¦°ìƒ·ê³¼ ì˜ë¯¸ ì—†ëŠ” ë©”ëª¨ì¥ íŒŒì¼ë¿.\n\n\"ì´ê²ƒë„ ë‚˜ì¤‘ì—... ì €ê²ƒë„ ë‚˜ì¤‘ì—...\"\n\në¯¸ë˜ì˜ ë‚˜ì—ê²Œ ë¯¸ë¤˜ë˜ ë¹šì´ ì“°ë‚˜ë¯¸ê°€ ë˜ì–´ ëŒì•„ì™”ë‹¤.\në‚¨ë“¤ì€ ê²°ê³¼ë¬¼ì„ ë©‹ì§„ PDFë¡œ ë½ë‚´ëŠ”ë°, ë‚´ ëª¨ë‹ˆí„°ì—” ë¹ˆ í´ë”ë§Œ ê¹œë¹¡ê±°ë¦°ë‹¤.\nì œì¶œ ë²„íŠ¼ì„ ëˆ„ë¥´ì§€ ëª»í•˜ê³  ì°½ì„ ë‹«ì•˜ë‹¤. ë‚´ ëŒ€í•™ ìƒí™œì€ 'ì œëª© ì—†ìŒ'ìœ¼ë¡œ ëë‚¬ë‹¤.");
    }
    else if(st->slaveFlag >=1 ){
        typingPrint("[ëŒ€í•™ì› ì—”ë”©] \n\n\"ìë„¤, ì—°êµ¬ì— ì¬ëŠ¥ì´ ìˆì–´. ëŒ€í•™ì› ìƒê° ì—†ë‚˜?\"\n\nêµìˆ˜ë‹˜ì˜ ë‹¬ì½¤í•œ ì œì•ˆ. ê·¸ë¦¬ê³  ì •ì‹ ì„ ì°¨ë ¤ë³´ë‹ˆ ë‚˜ëŠ” ë©ì‹¤ ì±…ìƒ ì•ì— ì•‰ì•„ ìˆë‹¤.\nì¹œêµ¬ë“¤ì´ ì·¨ì—…í•´ì„œ ì²« ì›”ê¸‰ì„ ìë‘í•  ë•Œ, ë‚˜ëŠ” ë°¤ìƒˆ ë…¼ë¬¸ì„ ì½ê³  ì‹¤í—˜ ë°ì´í„°ë¥¼ ì •ë¦¬í•œë‹¤.\n\n\"êµìˆ˜ë‹˜, ì € ì¡¸ì—…ì€ ì–¸ì œì¯¤...\"\n\"í—ˆí—ˆ, ìë„¤ ì•„ì§ ë©€ì—ˆë„¤. ì´ë²ˆ í•™íšŒ ì¤€ë¹„ëŠ” ë‹¤ ëë‚˜?\"\n\ní•™êµì˜ ë¶ˆì€ êº¼ì§€ì§€ ì•Šê³ , ë‚˜ì˜ ì²­ì¶˜ë„ ë©ì‹¤ì— ì €ë‹¹ ì¡í˜”ë‹¤.");
    }
    //4í•™ë…„
    
    else if (st->quitFlag >= 1) {
		typingPrint("[ì¤‘ë„í¬ê¸° ì—”ë”©] \n\n\"ë” ì´ìƒì€ ëª»í•˜ê² ì–´.\" \n\në‚˜ëŠ” ëª¨ë“  ê²ƒì„ ë‚´ë ¤ë†“ì•˜ë‹¤. \nì±…ìƒ ìœ„ì— í¼ì³ì§„ êµì¬ë“¤, \nì»´í“¨í„° í™”ë©´ ì† ë¯¸ì™„ì„± ê³¼ì œë“¤. \nëª¨ë“  ê²ƒì´ ë‚˜ë¥¼ ì¡°ì—¬ì™”ë‹¤. \në‚˜ëŠ” ì¡°ìš©íˆ ë¬¸ì„ ë‹«ê³  ë°–ìœ¼ë¡œ ë‚˜ê°”ë‹¤.");
    }
    else if (st->graduateFlag >= 1) {
		typingPrint("[ëŒ€í•™ì› ì—”ë”©] \n\n\"êµìˆ˜ë‹˜, ì € ëŒ€í•™ì›ì— í•©ê²©í–ˆì–´ìš”!\" \n\në‚˜ëŠ” í•™ì‚¬ëª¨ ëŒ€ì‹  ì—°êµ¬ì‹¤ ì±…ë”ë¯¸ ì†ì—ì„œ ë¯¸ë˜ë¥¼ ì¤€ë¹„í–ˆë‹¤. \nëì—†ëŠ” ì‹¤í—˜ê³¼ ë…¼ë¬¸ ì‘ì„± ì†ì—ì„œ ë‚˜ëŠ” ì§„ì •í•œ ë°°ì›€ì˜ ê¸¸ì„ ê±¸ì—ˆë‹¤.");
    }


    printf("\n\n====================================\n");

    

    waitEnter();
}

void printEnding(const State* st) {
    system("cls");

    // 1. ì¡¸ì—…ì‹ ë¶„ìœ„ê¸° ì¡°ì„±
    setColor(15); // ë°ì€ í°ìƒ‰
    typingPrint("\n\n [ ğŸ“ ì¡¸ì—…ì‹ ë‚  ] \n\n");
    Sleep(1000);
    
    typingPrint(" 4ë…„ì´ë¼ëŠ” ê¸´ ì‹œê°„ì´ ì£¼ë§ˆë“±ì²˜ëŸ¼ ìŠ¤ì³ ì§€ë‚˜ê°‘ë‹ˆë‹¤.\n");
    typingPrint(" ë²šê½ƒì´ í©ë‚ ë¦¬ë˜ ì…í•™ì‹, ë°¤ìƒˆì›Œ ì½”ë”©í•˜ë˜ ë„ì„œê´€, ê·¸ë¦¬ê³ ...\n\n");
    Sleep(1500);

    typingPrint(" ë‹¨ìƒ ìœ„ì—ì„œ ë‹¹ì‹ ì˜ ì´ë¦„ì´ í˜¸ëª…ë©ë‹ˆë‹¤.\n");
    typingPrint(" í•™ì‚¬ëª¨ë¥¼ ê³ ì³ ì“°ë©°, ë‹¹ì‹ ì€ ë¯¸ë˜ë¥¼ í–¥í•´ ë°œê±¸ìŒì„ ë‚´ë”›ìŠµë‹ˆë‹¤.\n\n");
    Sleep(1500);

    printf(" ."); Sleep(500); printf(" ."); Sleep(500); printf(" .\n\n");
    
    
    // [íˆë“  ì—”ë”©] ëŒ€ê¸°ì—… ì·¨ì—… (ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬ ì˜í•¨ + ê³ ìŠ¤í™)
    if (st->stress < 200 && st->skill > 300) {
        setColor(11); // í•˜ëŠ˜ìƒ‰
        printf(" ==================================================\n");
        printf("         ğŸ†      ëŒ€ê¸°ì—… ì·¨ì—… ì—”ë”©       ğŸ†       \n");
        printf(" ==================================================\n\n");
        
        setColor(15);
        typingPrint(" [ëŒ€ê¸°ì—… SW ê°œë°œì í•©ê²©]\n\n");
        typingPrint(" \"ì¶•í•˜í•©ë‹ˆë‹¤! ê·€í•˜ëŠ” ë‹¹ì‚¬ì˜ ì‹ ì… ê°œë°œìë¡œ ì±„ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.\"\n");
        typingPrint(" ë†’ì€ ì—°ë´‰, ìˆ˜í‰ì ì¸ ë¬¸í™”, ê·¸ë¦¬ê³  ì¾Œì í•œ íŒêµì˜ ì˜¤í”¼ìŠ¤.\n");
        typingPrint(" ì ì ˆí•œ ì›Œë¼ë°¸ì„ ì§€í‚¤ë©° ìŒ“ì•„ì˜¨ ë‹¹ì‹ ì˜ ë…¸ë ¥ì´ ë¹›ì„ ë°œí–ˆìŠµë‹ˆë‹¤.\n");
        typingPrint(" ë‹¹ì‹ ì€ ë™ê¸°ë“¤ì˜ ë¶€ëŸ¬ì›€ì„ í•œ ëª¸ì— ë°›ìœ¼ë©° ì‚¬íšŒë¡œ ë‚˜ì•„ê°‘ë‹ˆë‹¤.\n");
    }
    // [êµìˆ˜ ì—”ë”©] ëŒ€í•™ì› ì§„í•™ (ì½”ë”© ëŠ¥ë ¥ì¹˜ ì´ˆì›”)
    else if (st->skill > 120) {
        setColor(14); // ë…¸ë€ìƒ‰
        printf(" ==================================================\n");
        printf("         ğŸ“š         ëŒ€í•™ì› ì§„í•™ ì—”ë”©              \n");
        printf(" ==================================================\n\n");

        setColor(15);
        typingPrint(" [ëŒ€í•™ì› ì„ë°•ì‚¬ í†µí•© ê³¼ì • ì§„í•™]\n\n");
        typingPrint(" \"ìë„¤, ëŒ€í•™ì› ì˜¬ ìƒê° ì—†ë‚˜? ë©ì‹¤ì— ìë¦¬ê°€ í•˜ë‚˜ ë‚¨ëŠ”ë°...\"\n");
        typingPrint(" êµìˆ˜ë‹˜ì˜ ì€ë°€í•œ ì œì•ˆ. ë‹¹ì‹ ì˜ ë›°ì–´ë‚œ ì‹¤ë ¥ì„ í•™ê³„ê°€ ë†“ì•„ì£¼ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\n");
        typingPrint(" ë‚¨ë“¤ì€ ì·¨ì—… ì „ì„ ì— ë›°ì–´ë“¤ ë•Œ, ë‹¹ì‹ ì€ ì§„ë¦¬ì˜ ìƒì•„íƒ‘ì— ë‚¨ê¸°ë¡œ í•©ë‹ˆë‹¤.\n");
        typingPrint(" (ëŒ€í•™ì›ìƒ ë…¸ì˜ˆ ìƒí™œì´ ì‹œì‘ëœ ê²ƒì¼ì§€ë„ ëª¨ë¦…ë‹ˆë‹¤...)\n");
    }
    // [ì¼ë°˜ ì—”ë”©] ë¬´ë‚œí•œ ì¡¸ì—…
    else {
        setColor(7); // ê¸°ë³¸ìƒ‰
        printf(" ==================================================\n");
        printf("          ğŸ“        í‰ë²”í•œ ì¡¸ì—… ì—”ë”©              \n");
        printf(" ==================================================\n\n");

        typingPrint(" [í‰ë²”í•œ í•™ì‚¬ ì¡¸ì—…]\n\n");
        typingPrint(" ë‹¤ì‚¬ë‹¤ë‚œí–ˆë˜ ëŒ€í•™ ìƒí™œì´ ëë‚¬ìŠµë‹ˆë‹¤.\n");
        typingPrint(" ì—„ì²­ë‚œ ëŒ€ê¸°ì—…ì€ ì•„ë‹ˆì§€ë§Œ, ì¤‘ê²¬ ê¸°ì—…ì— ë¬´ë‚œí•˜ê²Œ ì·¨ì—…í–ˆìŠµë‹ˆë‹¤.\n");
        typingPrint(" ê°€ë”ì€ í›„íšŒë„ ë˜ê³ , ê°€ë”ì€ ë¿Œë“¯í•˜ê¸°ë„ í–ˆë˜ 4ë…„.\n");
        typingPrint(" ì´ì œ í•™ìƒì´ë¼ëŠ” ì‹ ë¶„ì„ ë²—ê³ , ì§„ì§œ ì‚¬íšŒì¸ìœ¼ë¡œì„œì˜ ì‚¶ì„ ì‹œì‘í•©ë‹ˆë‹¤.\n");
    }

    // 3. ìµœì¢… ìŠ¤íƒ¯ ë³´ì—¬ì£¼ê¸° (ì„±ì í‘œ ëŠë‚Œ)
    Sleep(2000);
    printf("\n\n");
    setColor(8); // íšŒìƒ‰
    printf(" --------------------------------------------------\n");
    setColor(15);
    printf("                 [ ìµœì¢… ìŠ¤í…Ÿ ]\n");
    printf("  ì½”ë”© ì‹¤ë ¥ : %3d   |   ìŠ¤íŠ¸ë ˆìŠ¤ : %3d\n", st->skill, st->stress);
    printf("  ì—¬ì¹œ ì—¬ë¶€ : %3d   |   (0ì´ë©´ ì—¬ì¹œ ì—†ìŒ, 1ì´ë©´ ì—¬ì¹œ ìˆìŒ)\n", st->gf);
    setColor(8);
    printf(" --------------------------------------------------\n");

    // 4. ì§„ì§œ ì¢…ë£Œ
    printf("\n\n");
    setColor(15);
    printf("       ê²Œì„ì„ ì¢…ë£Œí•˜ë ¤ë©´ [Enter]ë¥¼ ëˆ„ë¥´ì„¸ìš”...\n");
    
    // ë²„í¼ ë¹„ìš°ê³  ëŒ€ê¸°
    while (_kbhit()) _getch();
    getchar();
}